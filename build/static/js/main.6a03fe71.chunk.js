(this["webpackJsonpyaanimail-chrome-extension"]=this["webpackJsonpyaanimail-chrome-extension"]||[]).push([[0],{112:function(e){e.exports=JSON.parse('{"E-MAIL":"E-mail","PASSWORD":"Password","LOGIN":"Login","LOGOUT":"Logout","NO_UNREAD_MAILS":"No unread e-mails...","UNREAD":"Unread","UNREAD_MAIL_COUNT":"Unread E-Mail Count","WELCOME":"Welcome"}')},113:function(e){e.exports=JSON.parse('{"E-MAIL":"E-posta","PASSWORD":"\u015eifre","LOGIN":"Giri\u015f","LOGOUT":"\xc7\u0131k\u0131\u015f","NO_UNREAD_MAILS":"Okunmam\u0131\u015f mail bulunmamaktad\u0131r...","UNREAD":"Okunmam\u0131\u015f","UNREAD_MAIL_COUNT":"Okunmam\u0131\u015f mail say\u0131s\u0131","WELCOME":"Ho\u015fgeldin"}')},114:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(12),i=n.n(r),s=(n(73),n(74),n(75),n(76),n(7)),o=(n(82),n(120)),l=n(118),u=n.p+"static/media/logo.d732ee88.svg",d=n(8),j=n(24),h=n.n(j),f=n(122),b=n(124),g=n(125),m="SET_AUTHED_USER",O="LOGOUT";function v(e){return{type:m,authedUser:e}}function x(){return{type:O}}var p=n(13),y=function e(){Object(p.a)(this,e)};y.saveToLocalStorage=function(e,t){return new Promise((function(n,a){var c={};c[e]=t,chrome.storage.sync.set(c,(function(){n(t)}))}))},y.getFromLocalStorage=function(e){return new Promise((function(t,n){chrome.storage.sync.get(e,(function(e){e?t(e):n()}))}))},y.getGatewayApiUrl=function(){return"https://capi.yaanimail.com/gateway/v1"};var N=y,_=function e(){Object(p.a)(this,e)};_.getAuthHeaders=function(){return Promise.all([_.getUserToken(),_.getDeviceId()]).then((function(e){return 2==e.length?{Authorization:"Bearer "+e[0],"App-Version":"1.0","Device-Language":"en-US","Device-Name":"WEB","Device-ID":e[1]}:{}})).catch((function(e){console.error(e)}))},_.getNonAuthHeaders=function(){return new Promise((function(e,t){_.getDeviceId().then((function(t){e({"App-Version":"1.0","Device-Language":"en-US","Device-Name":"WEB","Device-ID":t})}))}))},_.getUserToken=function(){return new Promise((function(e,t){N.getFromLocalStorage("ym@user").then((function(n){if(0!==Object.keys(n).length){var a=JSON.parse(n["ym@user"]);e(a.access_token)}else t()}))}))},_.getDeviceId=function(){return new Promise((function(e,t){N.getFromLocalStorage("y@uuid").then((function(t){if(0!==Object.keys(t).length)e(t["y@uuid"]);else{var n=_.generateUUID();N.saveToLocalStorage("y@uuid",n).then((function(t){e(t)}))}}))}))},_.generateUUID=function(){for(var e=[],t="0123456789abcdef",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")};var D=_,L=n(123),S=n(44),U=n(1);var w=Object(s.connect)()((function(){var e=Object(L.a)().t,t=Object(a.useState)(!0),n=Object(d.a)(t,2),c=(n[0],n[1]),r=Object(a.useState)(!1),i=Object(d.a)(r,2),o=(i[0],i[1],Object(a.useState)("")),l=Object(d.a)(o,2),u=l[0],j=l[1],m=Object(a.useState)(""),O=Object(d.a)(m,2),x=O[0],p=O[1],y=Object(s.useDispatch)();return Object(U.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={email:u,password:x,details:1};c(!0),D.getNonAuthHeaders().then((function(e){h.a.post(N.getGatewayApiUrl()+"/accounts/login",t,{headers:e}).then((function(e){c(!1),N.saveToLocalStorage("ym@user",JSON.stringify(e.data)).then((function(e){y(v(e))}))})).catch((function(e){console.log(e.message),S.b.error(e.message)}))}))},children:[Object(U.jsxs)("div",{className:"d-flex flex-column py-2",children:[Object(U.jsx)(f.a,{size:"sm",className:"mb-3",children:Object(U.jsx)(b.a,{placeholder:e("E-MAIL"),"aria-label":e("E-MAIL"),"aria-describedby":"basic-addon2",value:u,onChange:function(e){return j(e.target.value)}})}),Object(U.jsxs)(f.a,{size:"sm",className:"mb-3",children:[Object(U.jsx)(f.a.Text,{id:"inputGroup-sizing-sm",children:e("PASSWORD")}),Object(U.jsx)(b.a,{placeholder:e("PASSWORD"),"aria-label":e("PASSWORD"),"aria-describedby":"inputGroup-sizing-sm",type:"password",value:x,onChange:function(e){return p(e.target.value)}})]}),Object(U.jsx)("div",{children:Object(U.jsx)(g.a,{variant:"primary",className:"float-end",type:"submit",children:e("LOGIN")})})]}),Object(U.jsx)(S.a,{position:"bottom-left",autoClose:1500,closeOnClick:!0})]})})),A=n(19),M=h.a.create({baseURL:"https://capi.yaanimail.com/gateway/v1"});M.interceptors.response.use((function(e){return e}),(function(e){return 401===e.response.status?new Promise((function(e,t){N.saveToLocalStorage("ym@user",null).then((function(t){Object(s.useDispatch)(x()),e(t)})).catch((function(e){console.log(e),t(e)}))})):(e.response.message=function(e){var t,n=null===e||void 0===e||null===(t=e.error)||void 0===t?void 0:t.message;return n&&A.a.exists(n)?A.a.t(n):e.error.message}(e.response),Promise.reject(e))}));var E=function e(){Object(p.a)(this,e)};E.logout=function(){return new Promise((function(e,t){D.getAuthHeaders().then((function(n){M.delete("/accounts/logout",{headers:n}).then((function(t){e(t)})).catch((function(e){t(e.response)}))})).catch((function(e){console.log(e),t(e)}))}))};var I=E;var T=function(){var e=Object(L.a)().t,t=Object(a.useState)(!0),n=Object(d.a)(t,2),c=(n[0],n[1]),r=Object(a.useState)(!1),i=Object(d.a)(r,2),o=(i[0],i[1],Object(s.useDispatch)());return Object(U.jsx)(g.a,{variant:"danger",onClick:function(e){c(!0),chrome.action.setBadgeText({text:""}),I.logout().then((function(){N.saveToLocalStorage("ym@user",null).then((function(){c(!1),o(x())}))})).catch((function(e){c(!1),console.log(e)}))},children:e("LOGOUT")})},Y=function e(){Object(p.a)(this,e)};Y.getAllFolders=function(){return new Promise((function(e,t){D.getAuthHeaders().then((function(n){M.get("/emails/folders/all",{headers:n}).then((function(n){n.data?e(n):t(n.data.error)})).catch((function(e){t(e.response)}))})).catch((function(e){console.log(e),t(e)}))}))},Y.getMails=function(e){var t=Object.entries(e).map((function(e){var t=Object(d.a)(e,2),n=t[0],a=t[1];return"".concat(n,"=").concat(a)})).join("&");return new Promise((function(e,n){D.getAuthHeaders().then((function(a){M.get("/emails/messages?".concat(t),{headers:a}).then((function(t){t.data?e(t):n(t.data.error)})).catch((function(e){n(e.response)}))})).catch((function(e){console.log(e),n(e)}))}))};var P=Y,k=n(116),R=n(117);var H=function(){var e=Object(L.a)().t,t=Object(a.useState)(!0),n=Object(d.a)(t,2),c=n[0],r=n[1],i=Object(a.useState)(0),s=Object(d.a)(i,2),o=s[0],l=s[1];return Object(a.useEffect)((function(){r(!0),P.getAllFolders().then((function(e){r(!1);var t=e.data.filter((function(e){return 2==e.id})),n=t&&t.length>0?t[0].unread:0;l(n),chrome.action.setBadgeText({text:""}),0!==n&&chrome.action.setBadgeText({text:"".concat(n>999?"+999":n)})})).catch((function(t){r(!1),chrome.action.setBadgeText({text:""}),console.log(t),t&&t.data&&console.log(e(t.data.message))}))}),[]),Object(U.jsxs)(g.a,{variant:"primary",children:[e("UNREAD")," ",c?Object(U.jsx)(k.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}):Object(U.jsx)(R.a,{bg:"secondary",children:o>999?"+999":o}),Object(U.jsx)("span",{className:"visually-hidden",children:e("UNREAD_MAIL_COUNT")})]})};var C=Object(s.connect)((function(e){var t=e.authedUser;return{isLoggedIn:!!t,authedUser:t}}))((function(e){return Object(U.jsx)(o.a,{bg:"light",children:Object(U.jsxs)(l.a,{children:[Object(U.jsx)(o.a.Brand,{href:"#home",children:Object(U.jsx)("img",{alt:"YaaniMail",src:u,width:"150",className:"d-inline-block align-top pt-1"})}),!1===e.isLoggedIn?Object(U.jsx)(w,{}):Object(U.jsxs)(a.Fragment,{children:[Object(U.jsx)(H,{}),Object(U.jsx)(T,{})]})]})})})),B=n(65),F=n.n(B),W=n(27);function G(){return function(e){return e(Object(W.showLoading)()),new Promise((function(e,t){N.getFromLocalStorage("ym@user").then((function(t){0!==Object.keys(t).length?e({authedUser:JSON.parse(t["ym@user"])}):e({})}))})).then((function(t){var n=t.authedUser;n&&e(v(n)),e(Object(W.hideLoading)())}))}}var V="SET_VIEW";var J=n(119),z=n(37),q=n(43),X=n(66),K=n(14),Q=n.n(K);n(56);var Z=Object(s.connect)((function(e){return{authedUser:e.authedUser,selectedView:e.view}}))((function(e){var t=Object(L.a)().t,n=Object(s.useDispatch)(),a=function(e){n(function(e){return{type:V,view:e}}(e))};return Object(U.jsxs)(J.a,{"aria-label":"Toolbar with Button groups",className:"border border-info p-1",children:[Object(U.jsxs)("div",{className:"m-auto",children:[Object(U.jsxs)("span",{className:"pe-2",children:[t("WELCOME")," ",e.authedUser.name?e.authedUser.name:e.authedUser.client_id]}),Object(U.jsx)(z.a,{icon:X.a}),Object(U.jsx)("span",{className:"ps-2",children:Q()(new Date).format("DD-MM-YYYY dddd")})]}),Object(U.jsx)("div",{className:"ms-2 me-1",children:Object(U.jsx)(g.a,{variant:"inbox"===e.selectedView?"secondary":"primary",className:"rounded-circle",disabled:"inbox"===e.selectedView,onClick:function(){return a("inbox")},children:Object(U.jsx)(z.a,{icon:q.b})})}),Object(U.jsx)("div",{children:Object(U.jsx)(g.a,{variant:"calendar"===e.selectedView?"secondary":"primary",className:"rounded-circle",disabled:"calendar"===e.selectedView,onClick:function(){return a("calendar")},children:Object(U.jsx)(z.a,{icon:q.a})})})]})}));var $=Object(s.connect)((function(e){var t=e.authedUser;return{isLoggedIn:!!t,language:t&&(t.language||"").length>0?t.language:"tr"}}))((function(e){var t=Object(L.a)().i18n,n=Object(s.useDispatch)();return Object(a.useEffect)((function(){n(G())}),[]),Object(a.useEffect)((function(){t.changeLanguage(e.language||"tr")}),[e.language]),Object(U.jsxs)("div",{children:[Object(U.jsx)(C,{}),e.isLoggedIn&&Object(U.jsx)(Z,{}),Object(U.jsx)("main",{className:F.a.main,children:e.children})]})})),ee=n(121),te=n(28),ne=n.n(te),ae=n.p+"static/media/icon-mail.edfb9dec.png";var ce=Object(s.connect)((function(e){var t=e.authedUser;return{accountMail:t?t.client_id:""}}))((function(e){var t=Object(L.a)().t,n=Object(a.useState)(!0),c=Object(d.a)(n,2),r=c[0],i=c[1],s=Object(a.useState)([]),o=Object(d.a)(s,2),l=o[0],u=o[1];return Object(a.useEffect)((function(){i(!0);P.getMails({folder:"inbox",limit:5,message_listing_type:"message",offset:0,order:"date",order_type:"desc",flag:!1,unread:!0,attachment:!1,search:"*"}).then((function(e){i(!1),u(e.data)})).catch((function(e){i(!1),console.log(e),e&&e.data&&console.log(t(e.data.message))}))}),[]),Object(U.jsxs)(a.Fragment,{children:[r?Object(U.jsx)("div",{className:"container h-100",children:Object(U.jsx)("div",{className:"d-flex justify-content-center align-items-center ".concat(ne.a.vh70),children:Object(U.jsx)(k.a,{animation:"border",variant:"info"})})}):l&&l.map((function(t){return Object(U.jsx)("div",{onClick:function(){return function(t){var n="https://kurumsal.yaanimail.com/m/".concat(e.accountMail,"/PRIMARY/inbox/single/").concat(t,"/details");chrome.tabs.create({url:n},(function(e){}))}(t.id)},children:Object(U.jsxs)(ee.a,{border:"info",children:[Object(U.jsxs)(ee.a.Header,{children:[t.from.map((function(e){return e.full_name&&e.full_name.length>0?e.full_name:e.first_name}))," ","- ",Q.a.unix(t.time).format("MMMM Do YYYY, h:mm:ss a")]}),Object(U.jsxs)(ee.a.Body,{children:[Object(U.jsx)(ee.a.Text,{className:"fw-bold",children:t.subject}),Object(U.jsx)(ee.a.Text,{children:t.first_line})]})]})})})),!r&&(!l||0===l.length)&&Object(U.jsxs)("div",{className:"container h-100",children:[Object(U.jsx)("div",{className:"d-flex justify-content-center align-items-center ".concat(ne.a.vh70),children:Object(U.jsx)("img",{src:ae,alt:"Login",className:"not-found-image"})}),Object(U.jsx)("p",{class:"text-center text-primary fw-bold fs-6",children:t("NO_UNREAD_MAILS")})]})]})}));var re=Object(s.connect)((function(e){return{isLoggedIn:!!e.authedUser}}))((function(e){return e.isLoggedIn?Object(U.jsx)(ce,{}):Object(U.jsx)("div",{className:"container h-100",children:Object(U.jsx)("div",{className:"d-flex justify-content-center align-items-center ".concat(ne.a.vh70),children:Object(U.jsx)("img",{src:ae,alt:"Login",className:"not-found-image"})})})})),ie=n(67),se=function e(){Object(p.a)(this,e)};se.getEvents=function(e){var t="/calendars/appointment/".concat(e.calendarId,"/list");return e.startTime&&e.endTime&&(t=t+"?start_time="+e.startTime+"&end_time="+e.endTime),new Promise((function(e,n){D.getAuthHeaders().then((function(a){M.post(t,{},{headers:a}).then((function(t){t.data?e(t):n(t.data.error)})).catch((function(e){n(e.response)}))})).catch((function(e){console.log(e),n(e)}))}))};var oe=se,le=n(29),ue=n.n(le),de=function(e){var t=new Date(e.invitation_date),n=new Date(e.end_date),a=!1;return 1!==e.all_day&&t.getFullYear()===n.getFullYear()&&t.getMonth()===n.getMonth()&&t.getDate()!==n.getDate()&&(a=!0),a};var je=Object(s.connect)((function(e){var t=e.authedUser;return{language:t&&(t.language||"").length>0?t.language:"tr"}}))((function(e){Q.a.locale(e.language);var t=Object(L.a)().t,n=Object(a.useState)(!0),c=Object(d.a)(n,2),r=c[0],i=c[1],s=Object(a.useState)([]),o=Object(d.a)(s,2),l=o[0],u=o[1];return Object(a.useEffect)((function(){i(!0);var e=Q()(new Date).startOf("day").valueOf(),n={calendarId:10,startTime:Q()(e).startOf("day").valueOf(),endTime:Q()(e).endOf("day").valueOf()};oe.getEvents(n).then((function(e){i(!1),u(function(e){var t,n=[],a=Object(ie.a)(e);try{for(a.s();!(t=a.n()).done;){var c=t.value,r=new Date(c.invitation_date),i=new Date(c.end_date),s=de(c),o=void 0;o=s?{title:c.subject,start:Q()(r.toString()).format("DD-MM-YYYY"),end:Q()(i.toString()).add(1,"days").format("DD-MM-YYYY"),id:c.appointment_id}:{title:c.subject,start:Q()(r.toString()).format("DD-MM-YYYY HH:mm"),end:Q()(i.toString()).format("DD-MM-YYYY HH:mm"),id:c.appointment_id,allDay:1===c.all_day},n.push(o)}}catch(l){a.e(l)}finally{a.f()}return n}(e.data))})).catch((function(e){i(!1),console.log(e),e&&e.data&&console.log(t(e.data.message))}))}),[]),Object(U.jsxs)(a.Fragment,{children:[r?Object(U.jsx)("div",{className:"container h-100",children:Object(U.jsx)("div",{className:"d-flex justify-content-center align-items-center ".concat(ue.a.vh70),children:Object(U.jsx)(k.a,{animation:"border",variant:"info"})})}):l&&l.map((function(e){return Object(U.jsx)("div",{children:Object(U.jsxs)(ee.a,{border:"info",children:[Object(U.jsxs)(ee.a.Header,{children:[Object(U.jsxs)("div",{className:"fs-6",children:[Object(U.jsx)(R.a,{bg:"primary",children:e.start}),Object(U.jsx)("span",{className:"text-primary",children:" - "}),Object(U.jsx)(R.a,{bg:"primary",children:e.end})]}),Object(U.jsx)(R.a,{variant:"primary",pill:!0,children:e.allDay})]}),Object(U.jsx)(ee.a.Body,{children:Object(U.jsx)(ee.a.Text,{children:e.title})})]},e.id)})})),!r&&(!l||0===l.length)&&Object(U.jsxs)("div",{className:"container h-100",children:[Object(U.jsx)("div",{className:"d-flex justify-content-center align-items-center ".concat(ue.a.vh70),children:Object(U.jsx)("img",{src:ae,alt:"Login",className:"not-found-image"})}),Object(U.jsx)("p",{class:"text-center text-primary fw-bold fs-6",children:t("NO_UNREAD_MAILS")})]})]})}));var he=Object(s.connect)((function(e){return{isLoggedIn:!!e.authedUser}}))((function(e){return e.isLoggedIn?Object(U.jsx)(je,{}):Object(U.jsx)("div",{className:"container h-100",children:Object(U.jsx)("div",{className:"d-flex justify-content-center align-items-center ".concat(ue.a.vh70),children:Object(U.jsx)("img",{src:ae,alt:"Login",className:"not-found-image"})})})}));var fe=Object(s.connect)((function(e){var t=e.view;return console.log(t),{selectedView:t}}))((function(e){return Object(U.jsxs)($,{children:["inbox"===e.selectedView&&Object(U.jsx)(re,{}),"calendar"===e.selectedView&&Object(U.jsx)(he,{})]})})),be=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,126)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))},ge=n(22);var me=Object(ge.b)({authedUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return t.authedUser;case O:return null;default:return e}},view:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"inbox",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:return t.view;default:return e}},loadingBar:W.loadingBarReducer}),Oe=n(68),ve=Object(ge.a)(Oe.a),xe=n(30);A.a.use(xe.e).init({fallbackLng:"en",lng:"en",resources:{en:{translations:n(112)},tr:{translations:n(113)}},ns:["translations"],defaultNS:"translations"}),A.a.languages=["en","tr"];A.a;var pe=Object(ge.c)(me,ve);i.a.render(Object(U.jsx)(c.a.StrictMode,{children:Object(U.jsx)(s.Provider,{store:pe,children:Object(U.jsx)(fe,{})})}),document.getElementById("root")),be()},28:function(e,t,n){e.exports={vh70:"Mailbox_vh70__3XhAL"}},29:function(e,t,n){e.exports={vh70:"Calendar_vh70__1atqW"}},65:function(e,t,n){e.exports={main:"Layout_main__auk_r"}},73:function(e,t,n){},74:function(e,t,n){},82:function(e,t,n){e.exports={header:"Header_header__2otSh",logo:"Header_logo__2yYRj",active:"Header_active__WHMYj",badge:"Header_badge__1yJvq"}}},[[114,1,2]]]);
//# sourceMappingURL=main.6a03fe71.chunk.js.map