(this["webpackJsonpyaanimail-chrome-extension"]=this["webpackJsonpyaanimail-chrome-extension"]||[]).push([[0],{23:function(e,t,n){e.exports={vh70:"Mailbox_vh70__3XhAL"}},48:function(e,t,n){e.exports={main:"Layout_main__auk_r"}},55:function(e,t,n){},56:function(e,t,n){},58:function(e,t,n){e.exports={header:"Header_header__2otSh",logo:"Header_logo__2yYRj",active:"Header_active__WHMYj",badge:"Header_badge__1yJvq"}},87:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(13),i=n.n(r),s=(n(55),n(56),n(57),n(58),n(9)),o=n(92),u=n(91),l=n.p+"static/media/logo.d732ee88.svg",d=n(6),j=n(15),h=n.n(j),f=n(94),b=n(95),g=n(96),m="SET_AUTHED_USER",O="LOGOUT";function v(e){return{type:m,authedUser:e}}var x=n(16),p=function e(){Object(x.a)(this,e)};p.saveToLocalStorage=function(e,t){return new Promise((function(n,a){var c={};c[e]=t,chrome.storage.sync.set(c,(function(){n(t)}))}))},p.getFromLocalStorage=function(e){return new Promise((function(t,n){chrome.storage.sync.get(e,(function(e){e?t(e):n()}))}))},p.getGatewayApiUrl=function(){return"https://capi.yaanimail.com/gateway/v1"};var y=p,_=function e(){Object(x.a)(this,e)};_.getAuthHeaders=function(){return Promise.all([_.getUserToken(),_.getDeviceId()]).then((function(e){if(2==e.length)return{Authorization:"Bearer "+e[0],"App-Version":"1.0","Device-Language":"en-US","Device-Name":"WEB","Device-ID":e[1]}}))},_.getNonAuthHeaders=function(){return new Promise((function(e,t){_.getDeviceId().then((function(t){e({"App-Version":"1.0","Device-Language":"en-US","Device-Name":"WEB","Device-ID":t})}))}))},_.getUserToken=function(){return new Promise((function(e,t){y.getFromLocalStorage("ym@user").then((function(n){if(0!==Object.keys(n).length){var a=JSON.parse(n["ym@user"]);e(a.access_token)}else t()}))}))},_.getDeviceId=function(){return new Promise((function(e,t){y.getFromLocalStorage("y@uuid").then((function(t){if(0!==Object.keys(t).length)e(t["y@uuid"]);else{var n=_.generateUUID();y.saveToLocalStorage("y@uuid",n).then((function(t){e(t)}))}}))}))},_.generateUUID=function(){for(var e=[],t="0123456789abcdef",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")};var S=_,U=n(1);var w=Object(s.connect)()((function(){var e=Object(a.useState)(!0),t=Object(d.a)(e,2),n=(t[0],t[1]),c=Object(a.useState)(!1),r=Object(d.a)(c,2),i=(r[0],r[1],Object(a.useState)("")),o=Object(d.a)(i,2),u=o[0],l=o[1],j=Object(a.useState)(""),m=Object(d.a)(j,2),O=m[0],x=m[1],p=Object(s.useDispatch)();return Object(U.jsx)("form",{onSubmit:function(e){e.preventDefault();var t={email:u,password:O,details:1};n(!0),S.getNonAuthHeaders().then((function(e){h.a.post(y.getGatewayApiUrl()+"/accounts/login",t,{headers:e}).then((function(e){n(!1),y.saveToLocalStorage("ym@user",JSON.stringify(e.data)).then((function(e){p(v(e))}))})).catch((function(e){console.log(e),console.log(e.error.message)}))}))},children:Object(U.jsxs)("div",{className:"d-flex flex-column py-2",children:[Object(U.jsx)(f.a,{size:"sm",className:"mb-3",children:Object(U.jsx)(b.a,{placeholder:"E-mail","aria-label":"E-mail","aria-describedby":"basic-addon2",value:u,onChange:function(e){return l(e.target.value)}})}),Object(U.jsxs)(f.a,{size:"sm",className:"mb-3",children:[Object(U.jsx)(f.a.Text,{id:"inputGroup-sizing-sm",children:"Password"}),Object(U.jsx)(b.a,{placeholder:"Password","aria-label":"Password","aria-describedby":"inputGroup-sizing-sm",type:"password",value:O,onChange:function(e){return x(e.target.value)}})]}),Object(U.jsx)("div",{children:Object(U.jsx)(g.a,{variant:"primary",className:"float-end",type:"submit",children:"Login"})})]})})}));var L=function(){var e=Object(a.useState)(!0),t=Object(d.a)(e,2),n=(t[0],t[1]),c=Object(a.useState)(!1),r=Object(d.a)(c,2),i=(r[0],r[1],Object(s.useDispatch)());return Object(U.jsx)(g.a,{variant:"danger",onClick:function(e){n(!0),S.getAuthHeaders().then((function(e){h.a.delete(y.getGatewayApiUrl()+"/accounts/logout",{headers:e}).then((function(){y.saveToLocalStorage("ym@user",null).then((function(){n(!1),i({type:O})}))})).catch((function(e){console.log(e),console.log(e.error.message)}))}))},children:"Logout"})},N=n(89),D=n(90);var A=function(){var e=Object(a.useState)(!0),t=Object(d.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(0),i=Object(d.a)(r,2),s=i[0],o=i[1];return Object(a.useEffect)((function(){c(!0),S.getAuthHeaders().then((function(e){h.a.get(y.getGatewayApiUrl()+"/emails/folders/all",{headers:e}).then((function(e){c(!1);var t=e.data.filter((function(e){return 2==e.id}));t&&t.length>0&&o(t[0].unread)})).catch((function(e){console.log(e),console.log(e.error.message)}))}))}),[]),Object(U.jsxs)(g.a,{variant:"primary",children:["Unread"," ",n?Object(U.jsx)(N.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}):Object(U.jsx)(D.a,{bg:"secondary",children:s>999?"+999":s}),Object(U.jsx)("span",{className:"visually-hidden",children:"Unread E-Mail Count"})]})};var I=Object(s.connect)((function(e){var t=e.authedUser;return{isLoggedIn:!!t,authedUser:t}}))((function(e){return Object(U.jsx)(o.a,{bg:"light",children:Object(U.jsxs)(u.a,{children:[Object(U.jsx)(o.a.Brand,{href:"#home",children:Object(U.jsx)("img",{alt:"YaaniMail",src:l,width:"150",className:"d-inline-block align-top pt-1"})}),!1===e.isLoggedIn?Object(U.jsx)(w,{}):Object(U.jsxs)(a.Fragment,{children:[Object(U.jsx)(A,{}),Object(U.jsx)(L,{})]})]})})})),M=n(48),P=n.n(M),T=n(22);function k(){return function(e){return e(Object(T.showLoading)()),new Promise((function(e,t){y.getFromLocalStorage("ym@user").then((function(t){0!==Object.keys(t).length?e({authedUser:JSON.parse(t["ym@user"])}):e({})}))})).then((function(t){var n=t.authedUser;n&&e(v(n)),e(Object(T.hideLoading)())}))}}var H=function(e){var t=Object(s.useDispatch)();return Object(a.useEffect)((function(){t(k())}),[]),Object(U.jsxs)("div",{children:[Object(U.jsx)(I,{}),Object(U.jsx)("main",{className:P.a.main,children:e.children})]})},E=n(93),F=n(49),B=n.n(F),C=n(23),G=n.n(C),Y=n.p+"static/media/icon-mail.edfb9dec.png";var z=Object(s.connect)((function(e){var t=e.authedUser;return{accountMail:t?t.client_id:""}}))((function(e){var t=Object(a.useState)(!0),n=Object(d.a)(t,2),c=n[0],r=n[1],i=Object(a.useState)([]),s=Object(d.a)(i,2),o=s[0],u=s[1];return Object(a.useEffect)((function(){r(!0),S.getAuthHeaders().then((function(e){h.a.get(y.getGatewayApiUrl()+"/emails/messages?folder=inbox&limit=5&message_listing_type=message&offset=0&order=date&order_type=desc&flag=false&unread=true&attachment=false&search=*",{headers:e}).then((function(e){r(!1),u(e.data)}))}))}),[]),Object(U.jsxs)(a.Fragment,{children:[c?Object(U.jsx)("div",{className:"container h-100",children:Object(U.jsx)("div",{className:"d-flex justify-content-center align-items-center ".concat(G.a.vh70),children:Object(U.jsx)(N.a,{animation:"border",variant:"info"})})}):o&&o.map((function(t){return Object(U.jsx)("div",{onClick:function(){return function(t){var n="https://kurumsal.yaanimail.com/m/".concat(e.accountMail,"/PRIMARY/inbox/single/").concat(t,"/details");chrome.tabs.create({url:n},(function(e){}))}(t.id)},children:Object(U.jsxs)(E.a,{border:"info",children:[Object(U.jsxs)(E.a.Header,{children:[t.from.map((function(e){return e.full_name&&e.full_name.length>0?e.full_name:e.first_name}))," ","- ",B.a.unix(t.time).format("MMMM Do YYYY, h:mm:ss a")]}),Object(U.jsxs)(E.a.Body,{children:[Object(U.jsx)(E.a.Text,{className:"fw-bold",children:t.subject}),Object(U.jsx)(E.a.Text,{children:t.first_line})]})]})})})),!c&&(!o||0===o.length)&&Object(U.jsxs)("div",{className:"container h-100",children:[Object(U.jsx)("div",{className:"d-flex justify-content-center align-items-center ".concat(G.a.vh70),children:Object(U.jsx)("img",{src:Y,alt:"Login",className:"not-found-image"})}),Object(U.jsx)("p",{class:"text-center text-primary fw-bold fs-6",children:"No unread e-mails..."})]})]})}));var J=Object(s.connect)((function(e){return{isLoggedIn:!!e.authedUser}}))((function(e){return e.isLoggedIn?Object(U.jsx)(z,{}):Object(U.jsx)("div",{className:"container h-100",children:Object(U.jsx)("div",{className:"d-flex justify-content-center align-items-center ".concat(G.a.vh70),children:Object(U.jsx)("img",{src:Y,alt:"Login",className:"not-found-image"})})})}));var R=function(){return Object(U.jsx)(H,{children:Object(U.jsx)(J,{})})},W=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,97)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))},V=n(18);var q=Object(V.b)({authedUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return t.authedUser;case O:return null;default:return e}},loadingBar:T.loadingBarReducer}),X=n(50),K=Object(V.a)(X.a),Q=Object(V.c)(q,K);i.a.render(Object(U.jsx)(c.a.StrictMode,{children:Object(U.jsx)(s.Provider,{store:Q,children:Object(U.jsx)(R,{})})}),document.getElementById("root")),W()}},[[87,1,2]]]);
//# sourceMappingURL=main.6ca11af8.chunk.js.map