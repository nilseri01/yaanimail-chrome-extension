(this["webpackJsonpyaanimail-chrome-extension"]=this["webpackJsonpyaanimail-chrome-extension"]||[]).push([[0],{114:function(e){e.exports=JSON.parse('{"E-MAIL":"E-mail","PASSWORD":"Password","LOGIN":"Login","LOGOUT":"Logout","NO_UNREAD_MAILS":"No unread e-mails...","UNREAD":"Unread","UNREAD_MAIL_COUNT":"Unread E-Mail Count","WELCOME":"Welcome","NO_APPOINTMENTS_TODAY":"No meetings today..."}')},115:function(e){e.exports=JSON.parse('{"E-MAIL":"E-posta","PASSWORD":"\u015eifre","LOGIN":"Giri\u015f","LOGOUT":"\xc7\u0131k\u0131\u015f","NO_UNREAD_MAILS":"Okunmam\u0131\u015f mail bulunmamaktad\u0131r...","UNREAD":"Okunmam\u0131\u015f","UNREAD_MAIL_COUNT":"Okunmam\u0131\u015f mail say\u0131s\u0131","WELCOME":"Ho\u015fgeldin","NO_APPOINTMENTS_TODAY":"Bug\xfcn toplant\u0131n\u0131z bulunmamaktad\u0131r..."}')},116:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(12),i=n.n(r),s=(n(75),n(76),n(77),n(78),n(7)),o=(n(84),n(122)),l=n(120),u=n.p+"static/media/logo.d732ee88.svg",d=n(8),j=n(124),f=n(126),h=n(127),b="SET_AUTHED_USER",m="LOGOUT";function g(e){return{type:b,authedUser:e}}function O(){return{type:m}}var v="SET_VIEW";function x(e){return{type:v,view:e}}var p=n(13),y=function e(){Object(p.a)(this,e)};y.saveMultipleToLocalStorage=function(e){return new Promise((function(t,n){chrome.storage.sync.set(e,(function(){t(e)}))}))},y.saveToLocalStorage=function(e,t){return new Promise((function(n,a){var c={};c[e]=t,chrome.storage.sync.set(c,(function(){n(t)}))}))},y.getMultipleFromLocalStorage=function(e){return new Promise((function(t,n){chrome.storage.sync.get(e,(function(e){e?t(e):n()}))}))},y.getFromLocalStorage=function(e){return new Promise((function(t,n){chrome.storage.sync.get(e,(function(e){e?t(e):n()}))}))},y.getGatewayApiUrl=function(){return"https://capi.yaanimail.com/gateway/v1"};var _=y,N=n(39),S=n.n(N),w=n(20),D=S.a.create({baseURL:"https://capi.yaanimail.com/gateway/v1"});D.interceptors.response.use((function(e){return e}),(function(e){return 401===e.response.status?new Promise((function(e,t){_.saveToLocalStorage("ym@user",null).then((function(t){Object(s.useDispatch)(O()),e(t)})).catch((function(e){console.log(e),t(e)}))})):(e.response.message=function(e){var t,n=null===e||void 0===e||null===(t=e.error)||void 0===t?void 0:t.message;return n&&w.a.exists(n)?w.a.t(n):e.error.message}(e.response),Promise.reject(e))}));var L=function e(){Object(p.a)(this,e)};L.getAuthHeaders=function(){return Promise.all([L.getUserToken(),L.getDeviceId()]).then((function(e){return 2==e.length?{Authorization:"Bearer "+e[0],"App-Version":"1.0","Device-Language":"en-US","Device-Name":"WEB","Device-ID":e[1]}:{}})).catch((function(e){console.error(e)}))},L.getNonAuthHeaders=function(){return new Promise((function(e,t){L.getDeviceId().then((function(t){e({"App-Version":"1.0","Device-Language":"en-US","Device-Name":"WEB","Device-ID":t})}))}))},L.getUserToken=function(){return new Promise((function(e,t){_.getFromLocalStorage("ym@user").then((function(n){if(0!==Object.keys(n).length){var a=JSON.parse(n["ym@user"]);e(a.access_token)}else t()}))}))},L.getDeviceId=function(){return new Promise((function(e,t){_.getFromLocalStorage("y@uuid").then((function(t){if(0!==Object.keys(t).length)e(t["y@uuid"]);else{var n=L.generateUUID();_.saveToLocalStorage("y@uuid",n).then((function(t){e(t)}))}}))}))},L.generateUUID=function(){for(var e=[],t="0123456789abcdef",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")};var M=L,U=function e(){Object(p.a)(this,e)};U.login=function(e){return new Promise((function(t,n){M.getNonAuthHeaders().then((function(a){D.post("/accounts/login",e,{headers:a}).then((function(e){t(e)})).catch((function(e){n(e.response)}))})).catch((function(e){console.log(e),n(e)}))}))},U.logout=function(){return new Promise((function(e,t){M.getAuthHeaders().then((function(n){D.delete("/accounts/logout",{headers:n}).then((function(t){e(t)})).catch((function(e){t(e.response)}))})).catch((function(e){console.log(e),t(e)}))}))};var T=U,A=n(125),E=n(44),I=n(1);var Y=Object(s.connect)()((function(){var e=Object(A.a)().t,t=Object(a.useState)(!0),n=Object(d.a)(t,2),c=(n[0],n[1]),r=Object(a.useState)(!1),i=Object(d.a)(r,2),o=(i[0],i[1],Object(a.useState)("")),l=Object(d.a)(o,2),u=l[0],b=l[1],m=Object(a.useState)(""),O=Object(d.a)(m,2),v=O[0],p=O[1],y=Object(s.useDispatch)();return Object(I.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={email:u,password:v,details:1};c(!0),T.login(t).then((function(e){c(!1),_.saveMultipleToLocalStorage({"ym@user":JSON.stringify(e.data),"ym@view":"inbox"}).then((function(e){y(g(JSON.parse(e["ym@user"]))),y(x("inbox"))}))})).catch((function(e){console.log(e.message),E.b.error(e.message)}))},children:[Object(I.jsxs)("div",{className:"d-flex flex-column py-2",children:[Object(I.jsx)(j.a,{size:"sm",className:"mb-3",children:Object(I.jsx)(f.a,{placeholder:e("E-MAIL"),"aria-label":e("E-MAIL"),"aria-describedby":"basic-addon2",value:u,onChange:function(e){return b(e.target.value)}})}),Object(I.jsxs)(j.a,{size:"sm",className:"mb-3",children:[Object(I.jsx)(j.a.Text,{id:"inputGroup-sizing-sm",children:e("PASSWORD")}),Object(I.jsx)(f.a,{placeholder:e("PASSWORD"),"aria-label":e("PASSWORD"),"aria-describedby":"inputGroup-sizing-sm",type:"password",value:v,onChange:function(e){return p(e.target.value)}})]}),Object(I.jsx)("div",{children:Object(I.jsx)(h.a,{variant:"primary",className:"float-end",type:"submit",children:e("LOGIN")})})]}),Object(I.jsx)(E.a,{position:"bottom-left",autoClose:1500,closeOnClick:!0})]})}));var P=function(){var e=Object(A.a)().t,t=Object(a.useState)(!0),n=Object(d.a)(t,2),c=(n[0],n[1]),r=Object(a.useState)(!1),i=Object(d.a)(r,2),o=(i[0],i[1],Object(s.useDispatch)());return Object(I.jsx)(h.a,{variant:"danger",onClick:function(e){c(!0),chrome.action.setBadgeText({text:""}),T.logout().then((function(){_.saveToLocalStorage("ym@user",null).then((function(){c(!1),o(O())}))})).catch((function(e){c(!1),console.log(e)}))},children:e("LOGOUT")})},k=n(19),C=n.n(k),H=function e(){Object(p.a)(this,e)};H.getAllFolders=function(){return new Promise((function(e,t){M.getAuthHeaders().then((function(n){D.get("/emails/folders/all",{headers:n}).then((function(n){n.data?e(n):t(n.data.error)})).catch((function(e){t(e.response)}))})).catch((function(e){console.log(e),t(e)}))}))},H.getMails=function(e){var t=Object.entries(e).map((function(e){var t=Object(d.a)(e,2),n=t[0],a=t[1];return"".concat(n,"=").concat(a)})).join("&");return new Promise((function(e,n){M.getAuthHeaders().then((function(a){D.get("/emails/messages?".concat(t),{headers:a}).then((function(t){t.data?e(t):n(t.data.error)})).catch((function(e){n(e.response)}))})).catch((function(e){console.log(e),n(e)}))}))};var R=H,B=n(118),F=n(119),W=function(){chrome.tabs.create({url:"https://kurumsal.yaanimail.com"})};var V=function(){var e=Object(A.a)().t,t=Object(a.useState)(!0),n=Object(d.a)(t,2),c=n[0],r=n[1],i=Object(a.useState)(0),s=Object(d.a)(i,2),o=s[0],l=s[1];return Object(a.useEffect)((function(){r(!0),R.getAllFolders().then((function(e){r(!1);var t=e.data.filter((function(e){return 2==e.id})),n=t&&t.length>0?t[0].unread:0;l(n),chrome.action.setBadgeText({text:""}),0!==n&&chrome.action.setBadgeText({text:"".concat(n>999?"+999":n)})})).catch((function(t){r(!1),chrome.action.setBadgeText({text:""}),console.log(t),t&&t.data&&console.log(e(t.data.message))}))}),[]),Object(I.jsxs)(h.a,{variant:"primary",onClick:W,children:[Object(I.jsxs)("span",{className:C.a.badge_label,children:[e("UNREAD")," "]}),c?Object(I.jsx)(B.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}):Object(I.jsx)(F.a,{bg:"secondary",children:o>999?"+999":o}),Object(I.jsx)("span",{className:"visually-hidden",children:e("UNREAD_MAIL_COUNT")})]})};var G=Object(s.connect)((function(e){var t=e.authedUser;return{isLoggedIn:!!t,authedUser:t}}))((function(e){return Object(I.jsx)(o.a,{bg:"light",children:Object(I.jsxs)(l.a,{children:[Object(I.jsx)(o.a.Brand,{href:"#home",children:Object(I.jsx)("img",{alt:"YaaniMail",src:u,width:"150",className:"d-inline-block align-top pt-1"})}),!1===e.isLoggedIn?Object(I.jsx)(Y,{}):Object(I.jsxs)(a.Fragment,{children:[Object(I.jsx)(V,{}),Object(I.jsx)(P,{})]})]})})})),J=n(65),z=n.n(J),q=n(27);function X(){return function(e){return e(Object(q.showLoading)()),new Promise((function(e,t){_.getMultipleFromLocalStorage(["ym@user","ym@view"]).then((function(t){if(t){var n=(t["ym@view"]||"").length>0?t["ym@view"]:"inbox";t["ym@user"]&&0!==Object.keys(t["ym@user"]).length&&e({authedUser:JSON.parse(t["ym@user"]),selectedView:n})}else e({})}))})).then((function(t){t.authedUser&&e(g(t.authedUser)),e(x(t.selectedView)),e(Object(q.hideLoading)())}))}}var Q=n(121),K=n(66),Z=n.n(K),$=n(36),ee=n(43),te=n(67),ne=n(14),ae=n.n(ne);n(56);var ce=Object(s.connect)((function(e){return{authedUser:e.authedUser,selectedView:e.view}}))((function(e){var t=Object(A.a)().t,n=Object(s.useDispatch)(),c=Object(a.useCallback)((function(e){_.saveToLocalStorage("ym@view",e).then((function(e){n(x(e))}))}),[]);return Object(I.jsxs)(Q.a,{"aria-label":"Toolbar with Button groups",className:"border border-info p-1 d-flex justify-content-between",children:[Object(I.jsxs)("div",{className:"d-flex flex-column ms-2 ".concat(Z.a.toolbar_container),children:[Object(I.jsxs)("div",{className:"text-truncate",children:[Object(I.jsxs)("span",{className:"me-1",children:[t("WELCOME")," ",e.authedUser.name?e.authedUser.name:e.authedUser.client_id]}),Object(I.jsx)($.a,{icon:te.a})]}),Object(I.jsx)("div",{children:ae()(new Date).format("DD-MM-YYYY dddd")})]}),Object(I.jsxs)("div",{className:"d-flex flex-row me-1",children:[Object(I.jsx)("div",{className:"me-1",children:Object(I.jsx)(h.a,{variant:"inbox"===e.selectedView?"secondary":"primary",className:"rounded-circle",disabled:"inbox"===e.selectedView,onClick:function(){return c("inbox")},children:Object(I.jsx)($.a,{icon:ee.b})})}),Object(I.jsx)("div",{children:Object(I.jsx)(h.a,{variant:"calendar"===e.selectedView?"secondary":"primary",className:"rounded-circle",disabled:"calendar"===e.selectedView,onClick:function(){return c("calendar")},children:Object(I.jsx)($.a,{icon:ee.a})})})]})]})}));var re=Object(s.connect)((function(e){var t=e.authedUser;return{isLoggedIn:!!t,language:t&&(t.language||"").length>0?t.language:"tr"}}))((function(e){var t=Object(A.a)().i18n,n=Object(s.useDispatch)();return Object(a.useEffect)((function(){n(X())}),[]),Object(a.useEffect)((function(){t.changeLanguage(e.language||"tr")}),[e.language]),Object(I.jsxs)("div",{children:[Object(I.jsx)(G,{}),e.isLoggedIn&&Object(I.jsx)(ce,{}),Object(I.jsx)("main",{className:z.a.main,children:e.children})]})})),ie=n(123),se=n.p+"static/media/icon-mail.edfb9dec.png";var oe=Object(s.connect)((function(e){var t=e.authedUser;return{accountMail:t?t.client_id:""}}))((function(e){var t=Object(A.a)().t,n=Object(a.useState)(!0),c=Object(d.a)(n,2),r=c[0],i=c[1],s=Object(a.useState)([]),o=Object(d.a)(s,2),l=o[0],u=o[1];return Object(a.useEffect)((function(){i(!0);R.getMails({folder:"inbox",limit:5,message_listing_type:"message",offset:0,order:"date",order_type:"desc",flag:!1,unread:!0,attachment:!1,search:"*"}).then((function(e){i(!1),u(e.data)})).catch((function(e){i(!1),console.log(e),e&&e.data&&console.log(t(e.data.message))}))}),[]),Object(I.jsxs)(a.Fragment,{children:[r?Object(I.jsx)("div",{className:"container h-100",children:Object(I.jsx)("div",{className:"d-flex justify-content-center align-items-center ".concat(C.a.vh70),children:Object(I.jsx)(B.a,{animation:"border",variant:"info"})})}):l&&l.map((function(t){return Object(I.jsx)("div",{onClick:function(){return function(t){var n="https://kurumsal.yaanimail.com/m/".concat(e.accountMail,"/PRIMARY/inbox/single/").concat(t,"/details");chrome.tabs.create({url:n},(function(e){}))}(t.id)},children:Object(I.jsxs)(ie.a,{border:"info",children:[Object(I.jsxs)(ie.a.Header,{children:[t.from.map((function(e){return e.full_name&&e.full_name.length>0?e.full_name:e.first_name}))," ","- ",ae.a.unix(t.time).format("Do MMMM YYYY, hh:mm:ss")]}),Object(I.jsxs)(ie.a.Body,{children:[Object(I.jsx)(ie.a.Text,{className:"fw-bold",children:t.subject}),Object(I.jsx)(ie.a.Text,{children:t.first_line})]})]})})})),!r&&(!l||0===l.length)&&Object(I.jsxs)("div",{className:"container h-100",children:[Object(I.jsx)("div",{className:"d-flex justify-content-center align-items-center ".concat(C.a.vh70),children:Object(I.jsx)("img",{src:se,alt:"Login",className:"not-found-image"})}),Object(I.jsx)("p",{class:"text-center text-primary fw-bold fs-6",children:t("NO_UNREAD_MAILS")})]})]})}));var le=Object(s.connect)((function(e){return{isLoggedIn:!!e.authedUser}}))((function(e){return e.isLoggedIn?Object(I.jsx)(oe,{}):Object(I.jsx)("div",{className:"container h-100",children:Object(I.jsx)("div",{className:"d-flex justify-content-center align-items-center ".concat(C.a.vh70),children:Object(I.jsx)("img",{src:se,alt:"Login",className:"not-found-image"})})})})),ue=n(68),de=function e(){Object(p.a)(this,e)};de.getEvents=function(e){var t="/calendars/appointment/".concat(e.calendarId,"/list");return e.startTime&&e.endTime&&(t=t+"?start_time="+e.startTime+"&end_time="+e.endTime),new Promise((function(e,n){M.getAuthHeaders().then((function(a){D.post(t,{},{headers:a}).then((function(t){t.data?e(t):n(t.data.error)})).catch((function(e){n(e.response)}))})).catch((function(e){console.log(e),n(e)}))}))};var je=de,fe=n(70),he=n(28),be=n.n(he),me={onClick:function(e){chrome.tabs.create({url:e.target.href})}},ge=function(e){var t=new Date(e.invitation_date),n=new Date(e.end_date),a=!1;return 1!==e.all_day&&t.getFullYear()===n.getFullYear()&&t.getMonth()===n.getMonth()&&t.getDate()!==n.getDate()&&(a=!0),a};var Oe=Object(s.connect)((function(e){var t=e.authedUser;return{language:t&&(t.language||"").length>0?t.language:"tr"}}))((function(e){ae.a.locale(e.language);var t=Object(A.a)().t,n=Object(a.useState)(!0),c=Object(d.a)(n,2),r=c[0],i=c[1],s=Object(a.useState)([]),o=Object(d.a)(s,2),l=o[0],u=o[1];return Object(a.useEffect)((function(){i(!0);var e=ae()(new Date).startOf("day").valueOf(),n={calendarId:10,startTime:ae()(e).startOf("day").valueOf(),endTime:ae()(e).endOf("day").valueOf()};je.getEvents(n).then((function(e){i(!1),u(function(e){var t,n=[],a=Object(ue.a)(e);try{for(a.s();!(t=a.n()).done;){var c=t.value,r=new Date(c.invitation_date),i=new Date(c.end_date),s=ge(c),o=void 0;o=s?{title:c.subject,start:ae()(r.toString()).format("DD-MM-YYYY"),end:ae()(i.toString()).add(1,"days").format("DD-MM-YYYY"),id:c.appointment_id,location:c.location}:{title:c.subject,start:ae()(r.toString()).format("DD-MM-YYYY HH:mm"),end:ae()(i.toString()).format("DD-MM-YYYY HH:mm"),id:c.appointment_id,location:c.location,allDay:1===c.all_day},n.push(o)}}catch(l){a.e(l)}finally{a.f()}return n.sort((function(e,t){return e.start<t.start?-1:1})),n}(e.data))})).catch((function(e){i(!1),console.log(e),e&&e.data&&console.log(t(e.data.message))}))}),[]),Object(I.jsxs)(a.Fragment,{children:[r?Object(I.jsx)("div",{className:"container h-100",children:Object(I.jsx)("div",{className:"d-flex justify-content-center align-items-center ".concat(be.a.vh70),children:Object(I.jsx)(B.a,{animation:"border",variant:"info"})})}):l&&l.map((function(e){return Object(I.jsx)("div",{children:Object(I.jsxs)(ie.a,{border:"info",children:[Object(I.jsxs)(ie.a.Header,{children:[Object(I.jsxs)("div",{className:"fs-6",children:[Object(I.jsx)(F.a,{bg:"primary",children:e.start}),Object(I.jsx)("span",{className:"text-primary",children:" - "}),Object(I.jsx)(F.a,{bg:"primary",children:e.end})]}),Object(I.jsx)(F.a,{variant:"primary",pill:!0,children:e.allDay})]}),Object(I.jsxs)(ie.a.Body,{children:[Object(I.jsx)(ie.a.Text,{children:e.title}),Object(I.jsx)(ie.a.Text,{children:Object(I.jsx)(fe.a,{options:{attributes:me},children:e.location})})]})]},e.id)})})),!r&&(!l||0===l.length)&&Object(I.jsxs)("div",{className:"container h-100",children:[Object(I.jsx)("div",{className:"d-flex justify-content-center align-items-center ".concat(be.a.vh70),children:Object(I.jsx)("img",{src:se,alt:"Login",className:"not-found-image"})}),Object(I.jsx)("p",{class:"text-center text-primary fw-bold fs-6",children:t("NO_APPOINTMENTS_TODAY")})]})]})}));var ve=Object(s.connect)((function(e){return{isLoggedIn:!!e.authedUser}}))((function(e){return e.isLoggedIn?Object(I.jsx)(Oe,{}):Object(I.jsx)("div",{className:"container h-100",children:Object(I.jsx)("div",{className:"d-flex justify-content-center align-items-center ".concat(be.a.vh70),children:Object(I.jsx)("img",{src:se,alt:"Login",className:"not-found-image"})})})}));var xe=Object(s.connect)((function(e){return{selectedView:e.view}}))((function(e){return Object(I.jsxs)(re,{children:["inbox"===e.selectedView&&Object(I.jsx)(le,{}),"calendar"===e.selectedView&&Object(I.jsx)(ve,{})]})})),pe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,128)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))},ye=n(23);var _e=Object(ye.b)({authedUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return t.authedUser;case m:return null;default:return e}},view:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"inbox",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return t.view;default:return e}},loadingBar:q.loadingBarReducer}),Ne=n(69),Se=Object(ye.a)(Ne.a),we=n(29);w.a.use(we.e).init({fallbackLng:"en",lng:"en",resources:{en:{translations:n(114)},tr:{translations:n(115)}},ns:["translations"],defaultNS:"translations"}),w.a.languages=["en","tr"];w.a;var De=Object(ye.c)(_e,Se);i.a.render(Object(I.jsx)(c.a.StrictMode,{children:Object(I.jsx)(s.Provider,{store:De,children:Object(I.jsx)(xe,{})})}),document.getElementById("root")),pe()},19:function(e,t,n){e.exports={vh70:"Mailbox_vh70__3XhAL",badge_label:"Mailbox_badge_label__tnQXn"}},28:function(e,t,n){e.exports={vh70:"Calendar_vh70__1atqW"}},65:function(e,t,n){e.exports={main:"Layout_main__auk_r"}},66:function(e,t,n){e.exports={toolbar_container:"Toolbar_toolbar_container__1Ghg7"}},75:function(e,t,n){},76:function(e,t,n){},84:function(e,t,n){e.exports={header:"Header_header__2otSh",logo:"Header_logo__2yYRj",active:"Header_active__WHMYj",badge:"Header_badge__1yJvq"}}},[[116,1,2]]]);
//# sourceMappingURL=main.c43563e1.chunk.js.map